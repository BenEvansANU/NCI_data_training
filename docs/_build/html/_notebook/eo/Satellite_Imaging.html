

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Digital Elevation Model (DEM) and Himawari Data &mdash; NCI data training  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> NCI data training
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../_overview/overview.html">Overview</a></li>
</ul>
<p class="caption"><span class="caption-text">Data Info</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../_data/where_to_find_data.html">Where to Find Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_data/where_to_get_data.html">Where to Get Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_data/how_to_use_data.html">How to Use Data</a></li>
</ul>
<p class="caption"><span class="caption-text">How to run Jupyter notebooks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../prep/install_jupyter.html">Install Jupyter and Python on your local machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prep/python_on_vdi.html">Setup Python environment on the VDI</a></li>
</ul>
<p class="caption"><span class="caption-text">Notebook examples grouped by theme</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../climate/climate.html">Climate and Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="eo.html">Earth Observation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../geophysics/geophysics.html">Geophysics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/general.html">Other examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Notebook examples grouped by service type</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tds/tds.html">THREDDS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gsky/gsky.html">GSKY</a></li>
</ul>
<p class="caption"><span class="caption-text">Help</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../_help/help.html">Help</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">NCI data training</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Digital Elevation Model (DEM) and Himawari Data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/_notebook/eo/Satellite_Imaging.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 5ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<p><img alt="logo" src="../../_images/NCI_logo1.png" /></p>
<hr class="docutils" />
<div class="section" id="Digital-Elevation-Model-(DEM)-and-Himawari-Data">
<h1>Digital Elevation Model (DEM) and Himawari Data<a class="headerlink" href="#Digital-Elevation-Model-(DEM)-and-Himawari-Data" title="Permalink to this headline">¶</a></h1>
<div class="section" id="In-this-notebook:">
<h2>In this notebook:<a class="headerlink" href="#In-this-notebook:" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>How to use the Python GDAL extensions to open NetCDF files.</li>
<li>How to reproject datasets between different coordinate systems.</li>
<li>How to combine and merge data from different sources.</li>
</ul>
</div>
<div class="section" id="Canberra,-the-mountains-or-the-south-coast?-Where’s-the-best-weather?">
<h2>Canberra, the mountains or the south coast? Where’s the best weather?<a class="headerlink" href="#Canberra,-the-mountains-or-the-south-coast?-Where’s-the-best-weather?" title="Permalink to this headline">¶</a></h2>
<div class="section" id="My-aunt-lives-in-Narooma,-my-brother-is-in-Thredbo-and-I-live-in-Canberra.-Last-September-we-interchanged-lots-of-messages-in-which-we-were-complaining-about-the-weather-in-our-respective-places…-But,-where-was-the-weather-the-worst?-Let’s-see-if-we-can-find-out…">
<h3>My aunt lives in Narooma, my brother is in Thredbo and I live in Canberra. Last September we interchanged lots of messages in which we were complaining about the weather in our respective places… But, where was the weather the worst? Let’s see if we can find out…<a class="headerlink" href="#My-aunt-lives-in-Narooma,-my-brother-is-in-Thredbo-and-I-live-in-Canberra.-Last-September-we-interchanged-lots-of-messages-in-which-we-were-complaining-about-the-weather-in-our-respective-places…-But,-where-was-the-weather-the-worst?-Let’s-see-if-we-can-find-out…" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="0.--To-run-this-notebook-on-the-VDI-you’ll-need-to-first-run:">
<h2>0.- To run this notebook on the VDI you’ll need to first run:<a class="headerlink" href="#0.--To-run-this-notebook-on-the-VDI-you’ll-need-to-first-run:" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ module purge

$ module load python/2.7.11 python/2.7.11-matplotlib numpy/py2.7 gdal/1.11.1-python ipython/4.2.0-py2.7

$ jupyter notebook
</pre></div>
</div>
</div>
<div class="section" id="1.--Intro-to-Himawari8">
<h2>1.- Intro to Himawari8<a class="headerlink" href="#1.--Intro-to-Himawari8" title="Permalink to this headline">¶</a></h2>
<p>Himawari 8 is a geostationary satellite that covers the area of the Asia-Pacific and takes a new picture every 10 minutes.</p>
<p>The Bureau of Meteorology uses this information operationally for their weather forecasts and the historical data is stored at the NCI at: /g/data2/rr5/satellite/obs/himawari8/FLDK/</p>
<div class="section" id="1.1.--An-index-for-Himawari8-files">
<h3>1.1.- An index for Himawari8 files<a class="headerlink" href="#1.1.--An-index-for-Himawari8-files" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">os.path</span>

<span class="k">def</span> <span class="nf">himawari8_path</span><span class="p">(</span><span class="n">UTC_datetime</span><span class="p">,</span> <span class="n">band</span><span class="p">):</span>
    <span class="n">base</span> <span class="o">=</span> <span class="s2">&quot;/g/data2/rr5/satellite/obs/himawari8/FLDK/</span><span class="si">{year:d}</span><span class="s2">/</span><span class="si">{month:02d}</span><span class="s2">/</span><span class="si">{day:02d}</span><span class="s2">/</span><span class="si">{hour:02d}{minute:02d}</span><span class="s2">/&quot;</span>
    <span class="n">file_name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{year:d}{month:02d}{day:02d}{hour:02d}{minute:02d}</span><span class="s2">00-P1S-ABOM_BRF_B</span><span class="si">{band:02d}</span><span class="s2">-PRJ_GEOS141_2000-HIMAWARI8-AHI.nc&quot;</span>

    <span class="n">st</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">UTC_datetime</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">%H%M&quot;</span><span class="p">)</span>

    <span class="n">path</span> <span class="o">=</span> <span class="p">(</span><span class="n">base</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">st</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="n">st</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="n">st</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="n">st</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="n">st</span><span class="o">.</span><span class="n">minute</span><span class="p">)</span> <span class="o">+</span>
            <span class="n">file_name</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">st</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="n">st</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="n">st</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="n">st</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="n">st</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">))</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="n">path</span>

<span class="c1"># For example, to get the path to band 1 taken of the 25th Dec 2015 at 00:00 UTC</span>
<span class="n">himawari8_path</span><span class="p">(</span><span class="s2">&quot;201512250000&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&#39;/g/data2/rr5/satellite/obs/himawari8/FLDK/2015/12/25/0000/20151225000000-P1S-ABOM_BRF_B01-PRJ_GEOS141_2000-HIMAWARI8-AHI.nc&#39;
</pre></div>
</div>
</div>
</div>
<div class="section" id="1.2.--Plot-raw-data-from-a-Himawari8-file">
<h3>1.2.- Plot raw data from a Himawari8 file<a class="headerlink" href="#1.2.--Plot-raw-data-from-a-Himawari8-file" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">from</span> <span class="nn">osgeo</span> <span class="k">import</span> <span class="n">gdal</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">himawari8_path</span><span class="p">(</span><span class="s2">&quot;201512250000&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">band1</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">raster</span> <span class="o">=</span> <span class="n">band1</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
<span class="n">no_data</span> <span class="o">=</span> <span class="n">band1</span><span class="o">.</span><span class="n">GetNoDataValue</span><span class="p">()</span>

<span class="n">masked</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">raster</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="p">(</span><span class="n">raster</span><span class="o">==</span><span class="n">no_data</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">masked</span><span class="p">)</span>

</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.image.AxesImage at 0x7fed3148c1d0&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_notebook_eo_Satellite_Imaging_6_1.png" src="../../_images/_notebook_eo_Satellite_Imaging_6_1.png" />
</div>
</div>
</div>
<div class="section" id="1.3.--Create-a-RGB-composite-using-three-bands">
<h3>1.3.- Create a RGB composite using three bands<a class="headerlink" href="#1.3.--Create-a-RGB-composite-using-three-bands" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">him_rgb</span><span class="p">(</span><span class="n">UTC_datetime</span><span class="p">,</span> <span class="n">rgb_bands</span><span class="p">,</span> <span class="n">clip</span><span class="p">):</span>
    <span class="n">red_path</span> <span class="o">=</span> <span class="n">himawari8_path</span><span class="p">(</span><span class="n">UTC_datetime</span><span class="p">,</span> <span class="n">rgb_bands</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">ds_r</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">red_path</span><span class="p">)</span>
    <span class="n">red</span> <span class="o">=</span> <span class="n">ds_r</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
    <span class="n">red</span> <span class="o">=</span> <span class="p">(</span><span class="n">red</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">clip</span><span class="p">)</span> <span class="o">/</span> <span class="n">clip</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>

    <span class="n">green_path</span> <span class="o">=</span> <span class="n">himawari8_path</span><span class="p">(</span><span class="n">UTC_datetime</span><span class="p">,</span> <span class="n">rgb_bands</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">ds_g</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">green_path</span><span class="p">)</span>
    <span class="n">green</span> <span class="o">=</span> <span class="n">ds_g</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
    <span class="n">green</span> <span class="o">=</span> <span class="p">(</span><span class="n">green</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">clip</span><span class="p">)</span> <span class="o">/</span> <span class="n">clip</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>

    <span class="n">blue_path</span> <span class="o">=</span> <span class="n">himawari8_path</span><span class="p">(</span><span class="n">UTC_datetime</span><span class="p">,</span> <span class="n">rgb_bands</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="n">ds_b</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">blue_path</span><span class="p">)</span>
    <span class="n">blue</span> <span class="o">=</span> <span class="n">ds_b</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
    <span class="n">blue</span> <span class="o">=</span> <span class="p">(</span><span class="n">blue</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">clip</span><span class="p">)</span> <span class="o">/</span> <span class="n">clip</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">stack</span><span class="p">((</span><span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="n">rgb</span> <span class="o">=</span> <span class="n">him_rgb</span><span class="p">(</span><span class="s2">&quot;201512250000&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="o">.</span><span class="mi">65</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rgb</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">rgb</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(5500, 5500, 3)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.image.AxesImage at 0x7fed3089eb10&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_notebook_eo_Satellite_Imaging_8_2.png" src="../../_images/_notebook_eo_Satellite_Imaging_8_2.png" />
</div>
</div>
</div>
<div class="section" id="1.4.--Plotting-a-portion-of-the-image">
<h3>1.4.- Plotting a portion of the image<a class="headerlink" href="#1.4.--Plotting-a-portion-of-the-image" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">rgb</span><span class="p">[</span><span class="mi">3200</span><span class="p">:</span><span class="mi">5000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">:</span><span class="mi">3500</span><span class="p">,</span> <span class="p">:])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.image.AxesImage at 0x7fed0b56a250&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_notebook_eo_Satellite_Imaging_10_1.png" src="../../_images/_notebook_eo_Satellite_Imaging_10_1.png" />
</div>
</div>
</div>
</div>
<div class="section" id="2.--Intro-to-GDAL:-Different-datasets-cover-different-areas-with-different-projections-and-resolutions…">
<h2>2.- Intro to GDAL: Different datasets cover different areas with different projections and resolutions…<a class="headerlink" href="#2.--Intro-to-GDAL:-Different-datasets-cover-different-areas-with-different-projections-and-resolutions…" title="Permalink to this headline">¶</a></h2>
<div class="section" id="How-can-we-combine-data-coming-from-different-sources?">
<h3>How can we combine data coming from different sources?<a class="headerlink" href="#How-can-we-combine-data-coming-from-different-sources?" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="2.1.--Defining-a-region-in-GeoJSON">
<h3>2.1.- Defining a region in GeoJSON<a class="headerlink" href="#2.1.--Defining-a-region-in-GeoJSON" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://geojson.io">geojson.io</a></p>
<p>This website allows us to draw polygons and get their gjson representation. For example:</p>
<p>‘{“type”:“Polygon”,“coordinates”:[[[148.5,-36],[148.5,-35],[150.2,-35],[150.2,-36],[148.5,-36]]]}’</p>
<p>Represents a box covering the Canberra region.</p>
<p><img alt="caption" src="../../_images/notebook_geojson.png" /></p>
</div>
<div class="section" id="2.2.--Defining-a-canvas-raster-in-GDAL:-Extent,-Size-and-Projection">
<h3>2.2.- Defining a canvas raster in GDAL: Extent, Size and Projection<a class="headerlink" href="#2.2.--Defining-a-canvas-raster-in-GDAL:-Extent,-Size-and-Projection" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="n">wgs84_wkt</span> <span class="o">=</span><span class="s1">&#39;GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.01745329251994328,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]&#39;</span>

<span class="k">def</span> <span class="nf">get_raster</span><span class="p">(</span><span class="n">geojson_poly</span><span class="p">,</span> <span class="n">pix_size</span><span class="p">):</span>
    <span class="n">coords</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">geojson_poly</span><span class="p">)[</span><span class="s2">&quot;coordinates&quot;</span><span class="p">]</span>

    <span class="n">min_lat</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">max_lat</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>

    <span class="n">min_lon</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">max_lon</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">geotrans</span> <span class="o">=</span> <span class="p">[</span><span class="n">min_lon</span><span class="p">,</span> <span class="n">pix_size</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">max_lat</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="n">pix_size</span><span class="p">]</span>
    <span class="n">size_x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">max_lon</span> <span class="o">-</span> <span class="n">min_lon</span><span class="p">)</span> <span class="o">/</span> <span class="n">pix_size</span><span class="p">)</span>
    <span class="n">size_y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">max_lat</span> <span class="o">-</span> <span class="n">min_lat</span><span class="p">)</span> <span class="o">/</span> <span class="n">pix_size</span><span class="p">)</span>

    <span class="n">mem_drv</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GetDriverByName</span><span class="p">(</span><span class="s1">&#39;MEM&#39;</span><span class="p">)</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">mem_drv</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">size_x</span><span class="p">,</span> <span class="n">size_y</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GDT_Float32</span><span class="p">)</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">SetProjection</span><span class="p">(</span><span class="n">wgs84_wkt</span><span class="p">)</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">SetGeoTransform</span><span class="p">(</span><span class="n">geotrans</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ds</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="2.3.--Reprojecting-between-reference-systems.">
<h3>2.3.- Reprojecting between reference systems.<a class="headerlink" href="#2.3.--Reprojecting-between-reference-systems." title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">reproject</span><span class="p">(</span><span class="n">src_file</span><span class="p">,</span> <span class="n">dst_ds</span><span class="p">):</span>
    <span class="n">src_ds</span> <span class="o">=</span> <span class="n">gdal</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">src_file</span><span class="p">)</span>
    <span class="n">gdal</span><span class="o">.</span><span class="n">ReprojectImage</span><span class="p">(</span><span class="n">src_ds</span><span class="p">,</span> <span class="n">dst_ds</span><span class="p">,</span> <span class="n">src_ds</span><span class="o">.</span><span class="n">GetProjection</span><span class="p">(),</span> <span class="n">dst_ds</span><span class="o">.</span><span class="n">GetProjection</span><span class="p">(),</span> <span class="n">gdal</span><span class="o">.</span><span class="n">GRA_NearestNeighbour</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">dst_ds</span><span class="o">.</span><span class="n">GetRasterBand</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">ReadAsArray</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="2.3.--Displaying-Himawari-8-for-a-geoJSON-defined-area.">
<h3>2.3.- Displaying Himawari 8 for a geoJSON defined area.<a class="headerlink" href="#2.3.--Displaying-Himawari-8-for-a-geoJSON-defined-area." title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">canberra_gjson</span> <span class="o">=</span> <span class="s1">&#39;{&quot;type&quot;:&quot;Polygon&quot;,&quot;coordinates&quot;:[[[148.5,-36],[148.5,-35],[150.2,-35],[150.2,-36],[148.5,-36]]]}&#39;</span>
<span class="n">him_dest</span> <span class="o">=</span> <span class="n">get_raster</span><span class="p">(</span><span class="n">canberra_gjson</span><span class="p">,</span> <span class="o">.</span><span class="mi">01</span><span class="p">)</span>
<span class="n">him_proj</span> <span class="o">=</span> <span class="n">reproject</span><span class="p">(</span><span class="n">himawari8_path</span><span class="p">(</span><span class="s2">&quot;201512250000&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">him_dest</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">him_proj</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.image.AxesImage at 0x7fed306050d0&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_notebook_eo_Satellite_Imaging_19_1.png" src="../../_images/_notebook_eo_Satellite_Imaging_19_1.png" />
</div>
</div>
</div>
<div class="section" id="2.4.--A-most-probably-too-simplistic-way-of-getting-cloud-coverage…">
<h3>2.4.- A most probably too simplistic way of getting cloud coverage…<a class="headerlink" href="#2.4.--A-most-probably-too-simplistic-way-of-getting-cloud-coverage…" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">clouds_proj</span> <span class="o">=</span> <span class="n">him_proj</span> <span class="o">&gt;</span> <span class="o">.</span><span class="mi">30</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">clouds_proj</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.image.AxesImage at 0x7fed305a2cd0&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_notebook_eo_Satellite_Imaging_21_1.png" src="../../_images/_notebook_eo_Satellite_Imaging_21_1.png" />
</div>
</div>
</div>
<div class="section" id="2.5.--What-is-the-mean-cloud-coverage-for-that-image?">
<h3>2.5.- What is the mean cloud coverage for that image?<a class="headerlink" href="#2.5.--What-is-the-mean-cloud-coverage-for-that-image?" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">clouds_proj</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>0.22372781065088757
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="3.--Intro-to-Digital-Elevation-Model-(DEM)-data">
<h2>3.- Intro to Digital Elevation Model (DEM) data<a class="headerlink" href="#3.--Intro-to-Digital-Elevation-Model-(DEM)-data" title="Permalink to this headline">¶</a></h2>
<p>DEM models produce regular grid in which each grid point represents a point in a surface and contains the altitude of that location.</p>
<p>Geoscience Australia publishes DEM data for Australia with a precision of a seconds of degree (30 meters). This data is stored at the NCI at: /g/data1/rr1/Elevation/</p>
<div class="section" id="3.1.--Using-the-above-functions-to-subset-these-data-into-the-same-defined-region,-resolution-and-reference-system.">
<h3>3.1.- Using the above functions to subset these data into the same defined region, resolution and reference system.<a class="headerlink" href="#3.1.--Using-the-above-functions-to-subset-these-data-into-the-same-defined-region,-resolution-and-reference-system." title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dem_file</span> <span class="o">=</span> <span class="s2">&quot;/g/data1/rr1/Elevation/NetCDF/1secSRTM_DEMs_v1.0/DEM-S/Elevation_1secSRTM_DEMs_v1.0_DEM-S_Mosaic_dems1sv1_0.nc&quot;</span>

<span class="n">elv_dest</span> <span class="o">=</span> <span class="n">get_raster</span><span class="p">(</span><span class="n">canberra_gjson</span><span class="p">,</span> <span class="o">.</span><span class="mi">01</span><span class="p">)</span>
<span class="n">elv_proj</span> <span class="o">=</span> <span class="n">reproject</span><span class="p">(</span><span class="n">dem_file</span><span class="p">,</span> <span class="n">elv_dest</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">elv_proj</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area highlight-none notranslate"><div class="highlight"><pre>
<span></span>&lt;matplotlib.image.AxesImage at 0x7fed304caa90&gt;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_notebook_eo_Satellite_Imaging_26_1.png" src="../../_images/_notebook_eo_Satellite_Imaging_26_1.png" />
</div>
</div>
</div>
<div class="section" id="3.2.--An-altitude-profile-of-our-selected-region:">
<h3>3.2.- An altitude profile of our selected region:<a class="headerlink" href="#3.2.--An-altitude-profile-of-our-selected-region:" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">elv_proj</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mi">2000</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Height&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of Pixels&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_notebook_eo_Satellite_Imaging_28_0.png" src="../../_images/_notebook_eo_Satellite_Imaging_28_0.png" />
</div>
</div>
</div>
<div class="section" id="3.3.--Defining-our-regions-of-interest:">
<h3>3.3.- Defining our regions of interest:<a class="headerlink" href="#3.3.--Defining-our-regions-of-interest:" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">elv_canberra</span> <span class="o">=</span> <span class="n">elv_proj</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span> <span class="mi">70</span><span class="p">:</span><span class="mi">120</span><span class="p">]</span>
<span class="n">elv_mountains</span> <span class="o">=</span> <span class="n">elv_proj</span><span class="p">[</span><span class="mi">50</span><span class="p">:,</span> <span class="p">:</span><span class="mi">60</span><span class="p">]</span>
<span class="n">elv_coast</span> <span class="o">=</span> <span class="n">elv_proj</span><span class="p">[</span><span class="mi">50</span><span class="p">:,</span> <span class="mi">130</span><span class="p">:]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The average height in Canberra is </span><span class="si">{0:.2f}</span><span class="s2"> m.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">elv_canberra</span><span class="o">.</span><span class="n">mean</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The average height in the mountains is </span><span class="si">{0:.2f}</span><span class="s2"> m.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">elv_mountains</span><span class="o">.</span><span class="n">mean</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The average height in the coast is </span><span class="si">{0:.2f}</span><span class="s2"> m.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">elv_coast</span><span class="o">.</span><span class="n">mean</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
The average height in Canberra is 776.15 m.
The average height in the mountains is 1245.20 m.
The average height in the coast is 265.97 m.
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="4.--Back-to-out-original-question:-Where-is-the-best-weather?">
<h2>4.- Back to out original question: Where is the best weather?<a class="headerlink" href="#4.--Back-to-out-original-question:-Where-is-the-best-weather?" title="Permalink to this headline">¶</a></h2>
<div class="section" id="4.1.--Packing-cloud-coverage-in-a-function">
<h3>4.1.- Packing cloud coverage in a function<a class="headerlink" href="#4.1.--Packing-cloud-coverage-in-a-function" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">give_me_cloud_coverage</span><span class="p">(</span><span class="n">utc_datetime</span><span class="p">,</span> <span class="n">raster_dest</span><span class="p">):</span>

    <span class="n">him_proj</span> <span class="o">=</span> <span class="n">reproject</span><span class="p">(</span><span class="n">himawari8_path</span><span class="p">(</span><span class="n">utc_datetime</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">raster_dest</span><span class="p">)</span>
    <span class="n">clouds_proj</span> <span class="o">=</span> <span class="n">him_proj</span> <span class="o">&gt;</span> <span class="o">.</span><span class="mi">30</span>
    <span class="n">clouds_canberra</span> <span class="o">=</span> <span class="n">clouds_proj</span><span class="p">[</span><span class="mi">10</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span> <span class="mi">70</span><span class="p">:</span><span class="mi">120</span><span class="p">]</span>
    <span class="n">clouds_mountains</span> <span class="o">=</span> <span class="n">clouds_proj</span><span class="p">[</span><span class="mi">50</span><span class="p">:,</span> <span class="p">:</span><span class="mi">60</span><span class="p">]</span>
    <span class="n">clouds_coast</span> <span class="o">=</span> <span class="n">clouds_proj</span><span class="p">[</span><span class="mi">50</span><span class="p">:,</span> <span class="mi">130</span><span class="p">:]</span>

    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">clouds_canberra</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">*</span><span class="mi">100</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">clouds_mountains</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">*</span><span class="mi">100</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">clouds_coast</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>

<span class="n">cbr</span><span class="p">,</span> <span class="n">mtn</span><span class="p">,</span> <span class="n">cst</span> <span class="o">=</span> <span class="n">give_me_cloud_coverage</span><span class="p">(</span><span class="s2">&quot;201609010000&quot;</span><span class="p">,</span> <span class="n">him_dest</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Cloud cover 1st Sept 2016. Canberra: </span><span class="si">{0:d}</span><span class="s2">% Mountains: </span><span class="si">{1:d}</span><span class="s2">% Coast: </span><span class="si">{2:d}</span><span class="s2">%&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cbr</span><span class="p">,</span> <span class="n">mtn</span><span class="p">,</span> <span class="n">cst</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Cloud cover 1st Sept 2016. Canberra: 5% Mountains: 52% Coast: 0%
</pre></div></div>
</div>
</div>
<div class="section" id="4.2.--Collecting-cloud-data-over-a-period">
<h3>4.2.- Collecting cloud data over a period<a class="headerlink" href="#4.2.--Collecting-cloud-data-over-a-period" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">clouds_in_a_period</span><span class="p">(</span><span class="n">UTC_start</span><span class="p">,</span> <span class="n">UTC_end</span><span class="p">,</span> <span class="n">raster_dest</span><span class="p">):</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">UTC_start</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">%H%M&quot;</span><span class="p">)</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">UTC_end</span><span class="p">,</span> <span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">%H%M&quot;</span><span class="p">)</span>

    <span class="n">cbr_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">mtn_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">cst_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">start</span> <span class="o">&lt;=</span> <span class="n">end</span><span class="p">:</span>
        <span class="n">cbr</span><span class="p">,</span> <span class="n">mtn</span><span class="p">,</span> <span class="n">cst</span> <span class="o">=</span> <span class="n">give_me_cloud_coverage</span><span class="p">(</span><span class="n">start</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y%m</span><span class="si">%d</span><span class="s2">%H%M&quot;</span><span class="p">),</span> <span class="n">raster_dest</span><span class="p">)</span>
        <span class="n">cbr_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cbr</span><span class="p">)</span>
        <span class="n">mtn_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mtn</span><span class="p">)</span>
        <span class="n">cst_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cst</span><span class="p">)</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">cbr_list</span><span class="p">,</span> <span class="n">mtn_list</span><span class="p">,</span> <span class="n">cst_list</span>

<span class="n">cbr_month</span><span class="p">,</span> <span class="n">mtn_month</span><span class="p">,</span> <span class="n">cst_month</span> <span class="o">=</span> <span class="n">clouds_in_a_period</span><span class="p">(</span><span class="s2">&quot;201609010000&quot;</span><span class="p">,</span> <span class="s2">&quot;201609300000&quot;</span><span class="p">,</span> <span class="n">him_dest</span><span class="p">)</span>
<span class="n">days</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">days</span><span class="p">,</span> <span class="n">cbr_month</span><span class="p">,</span> <span class="s1">&#39;ro-&#39;</span><span class="p">,</span> <span class="n">days</span><span class="p">,</span> <span class="n">mtn_month</span><span class="p">,</span> <span class="s1">&#39;g^-&#39;</span><span class="p">,</span> <span class="n">days</span><span class="p">,</span> <span class="n">cst_month</span><span class="p">,</span> <span class="s1">&#39;bs-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Day of the month&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Cloud Cover&#39;</span><span class="p">)</span>
<span class="n">lgnd</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Canberra&#39;</span><span class="p">,</span> <span class="s1">&#39;Mountains&#39;</span><span class="p">,</span> <span class="s1">&#39;Coast&#39;</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">lgnd</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/_notebook_eo_Satellite_Imaging_35_0.png" src="../../_images/_notebook_eo_Satellite_Imaging_35_0.png" />
</div>
</div>
</div>
<div class="section" id="4.3.--The-veredict">
<h3>4.3.- The veredict<a class="headerlink" href="#4.3.--The-veredict" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Canberra had an average </span><span class="si">{0:d}% o</span><span class="s2">f clouds during September 2016.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">cbr_month</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">())))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The mountains had and average </span><span class="si">{0:d}% o</span><span class="s2">f clouds during September 2016.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mtn_month</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">())))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The coast had and average </span><span class="si">{0:d}% o</span><span class="s2">f clouds during September 2016.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">cst_month</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">())))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Canberra had an average 57% of clouds during September 2016.
The mountains had and average 66% of clouds during September 2016.
The coast had and average 36% of clouds during September 2016.
</pre></div></div>
</div>
</div>
</div>
<div class="section" id="It-looks-like-the-coast-was-the-place-to-be.">
<h2>It looks like the coast was the place to be.<a class="headerlink" href="#It-looks-like-the-coast-was-the-place-to-be." title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="5.--Have-some-extra-time?">
<h2>5.- Have some extra time?<a class="headerlink" href="#5.--Have-some-extra-time?" title="Permalink to this headline">¶</a></h2>
<div class="section" id="Try-to-solve-this-other-question:-Last-September-was-very-rainy-with-floods-over-different-parts-of-NSW.-By-defining-two-polygons-one-for-north-NSW-and-other-for-south-NSW-can-you-determine-which-one-had-more-clouds-for-that-month?">
<h3>Try to solve this other question: Last September was very rainy with floods over different parts of NSW. By defining two polygons one for north NSW and other for south NSW can you determine which one had more clouds for that month?<a class="headerlink" href="#Try-to-solve-this-other-question:-Last-September-was-very-rainy-with-floods-over-different-parts-of-NSW.-By-defining-two-polygons-one-for-north-NSW-and-other-for-south-NSW-can-you-determine-which-one-had-more-clouds-for-that-month?" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, NCI

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>